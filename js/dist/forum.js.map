{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@walsgit/flarum-discussion-cards/./src/forum/compat.js","webpack://@walsgit/flarum-discussion-cards/./src/forum/components/CardItem.js","webpack://@walsgit/flarum-discussion-cards/./src/forum/components/LastReplies.js","webpack://@walsgit/flarum-discussion-cards/./src/forum/components/ListItem.js","webpack://@walsgit/flarum-discussion-cards/./src/forum/helpers/checkOverflowingTags.js","webpack://@walsgit/flarum-discussion-cards/./src/forum/helpers/compareTags.js","webpack://@walsgit/flarum-discussion-cards/./src/forum/helpers/getPostImage.js","webpack://@walsgit/flarum-discussion-cards/./src/forum/helpers/isValideImageUrl.js","webpack://@walsgit/flarum-discussion-cards/./src/forum/index.js","webpack://@walsgit/flarum-discussion-cards/./src/forum/utils/craftBadges.js","webpack://@walsgit/flarum-discussion-cards/./src/forum/utils/craftTags.js","webpack://@walsgit/flarum-discussion-cards/external assign \"flarum.core\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['app']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/Component']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/components/Button']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/components/Link']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/components/Placeholder']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/utils/abbreviateNumber']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/utils/humanTime']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/utils/string']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['components/TerminalPost']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['extend']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['forum/components/DiscussionList']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['forum/states/DiscussionListState']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['tags/utils/sortTags']\"","webpack://@walsgit/flarum-discussion-cards/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@walsgit/flarum-discussion-cards/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@walsgit/flarum-discussion-cards/webpack/bootstrap","webpack://@walsgit/flarum-discussion-cards/webpack/runtime/compat get default export","webpack://@walsgit/flarum-discussion-cards/webpack/runtime/define property getters","webpack://@walsgit/flarum-discussion-cards/webpack/runtime/hasOwnProperty shorthand","webpack://@walsgit/flarum-discussion-cards/webpack/runtime/make namespace object","webpack://@walsgit/flarum-discussion-cards/./forum.js"],"sourcesContent":["import CardItem from './components/CardItem';\r\nimport ListItem from './components/ListItem';\r\nimport LastReplies from './components/LastReplies';\r\nimport craftTags from \"./utils/craftTags\";\r\nimport craftBadges from \"./utils/craftBadges\";\r\n\r\nexport default {\r\n  'walsgit/discussion/cards/components/CardItem': CardItem,\r\n  'walsgit/discussion/cards/components/ListItem': ListItem,\r\n  'walsgit/discussion/cards/components/LastReplies': LastReplies,\r\n  'walsgit/discussion/cards/utils/craftTags': craftTags,\r\n  'walsgit/discussion/cards/utils/craftBadges': craftBadges,\r\n};\r\n","import Component from \"flarum/common/Component\";\r\nimport craftBadges from \"../utils/craftBadges\";\r\nimport getPostImage from \"../helpers/getPostImage\";\r\nimport craftTags from \"../utils/craftTags\";\r\nimport humanTime from \"flarum/common/utils/humanTime\";\r\nimport icon from \"flarum/common/helpers/icon\";\r\nimport username from \"flarum/common/helpers/username\";\r\nimport Dropdown from \"flarum/common/components/Dropdown\";\r\nimport DiscussionControls from \"flarum/forum/utils/DiscussionControls\";\r\nimport Link from \"flarum/common/components/Link\";\r\nimport { truncate } from \"flarum/common/utils/string\";\r\nimport LastReplies from \"./LastReplies\";\r\nimport compareTags from \"../helpers/compareTags\";\r\nimport isValideImageUrl from \"../helpers/isValideImageUrl\";\r\nimport TerminalPost from 'flarum/components/TerminalPost';\r\n\r\nexport default class cardItem extends Component {\r\n\toninit(vnode) {\r\n\t\tsuper.oninit(vnode);\r\n\t\tthis.discussion = this.attrs.discussion;\r\n\t}\r\n\r\n\tview() {\r\n\t\tconst discussion = this.discussion;\r\n\t\tconst settings = {};\r\n\t\tfor (const key in app.forum.data.attributes) {\r\n\t\t\tif (key.startsWith('walsgitDiscussionCards')) {\r\n\t\t\t\tlet newKey = key.replace('walsgitDiscussionCards', '');\r\n\t\t\t\tnewKey = newKey.replace(/^./, newKey.charAt(0).toLowerCase());\r\n\t\t\t\tsettings[newKey] = app.forum.data.attributes[key];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* Getting & setting relevant info for 3rd party Views extensions support: Flarumite and MichaelBelgium */\r\n\t\tconst viewsActivated = 'flarumite-simple-discussion-views' in flarum.extensions;\r\n\t\tconst isViewsSet = discussion.data.attributes.hasOwnProperty('views');\r\n\r\n\t\tconst mbViewsActivated = 'michaelbelgium-discussion-views' in flarum.extensions;\r\n\t\tconst isViewCountSet = discussion.data.attributes.hasOwnProperty('viewCount');\r\n\r\n\t\tconst viewsCount = viewsActivated && isViewsSet ? discussion.views() : mbViewsActivated && isViewCountSet ? discussion.viewCount() : NaN;\r\n\r\n\t\t/* Getting & setting relevant info for 3rd party Flarum Blog extension support */\r\n\t\tconst blogActivated = app.forum.data.attributes.hasOwnProperty('blogTags');\r\n\t\tconst blogSettings = {};\r\n\t\tconst postIsBlogType = discussion.data.relationships.hasOwnProperty('blogMeta');\r\n\t\tconst blogPost = {}\r\n\t\tif(blogActivated) {\r\n\t\t\tblogSettings.tags = app.forum.attribute('blogTags');\r\n\t\t\tblogSettings.defaultImage = app.forum.attribute('blogDefaultImage');\r\n\r\n\t\t\tif(postIsBlogType) {\r\n\t\t\t\tconst blogPostsData = discussion.store.data.blogMeta[discussion.data.relationships.blogMeta.data.id];\r\n\t\t\t\tif(isValideImageUrl(blogPostsData.attribute('featuredImage'))) {\r\n\t\t\t\t\tblogPost.featuredImage = blogPostsData.attribute('featuredImage');\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* Getting & setting relevant info for 3rd party Repost extension */\r\n\t\tconst repostActivated = 'shebaoting-repost' in flarum.extensions;\r\n\t\tconst repostUrl = discussion.data.attributes.original_url || null;\r\n\r\n\t\tconst isTagPage = m.route.get().split('?')[0].startsWith('/t/');\r\n\t\tlet tagId;\r\n\t\tif (isTagPage) {\r\n\t\t\tconst slug = m.route.get().split('/t/')[1]?.split('?')[0];\r\n\t\t\ttagId = app.store.all('tags').find(t => t.slug() === slug).data.id;\r\n\t\t\tconst tag = app.store.all('tags').find(t => t.id() === tagId);\r\n\t\t\tconst tagSettings = tag ? JSON.parse(tag.data.attributes.walsgitDiscussionCardsTagSettings || '{}') : {};\r\n\t\t\tconst tagImage = tag ? tag.data.attributes.walsgitDiscussionCardsTagDefaultImage : null;\r\n\t\t\t\r\n\t\t\ttagSettings.defaultImage = tagImage;\r\n\t\t\t/* In case Flarum Blog Extension and useBlogImage are activated  */\r\n\t\t\tif(blogActivated && Number(settings.useBlogImages) === 1 && blogSettings.tags.includes(tagId)) {\r\n\t\t\t\ttagSettings.defaultImage = postIsBlogType && blogPost.featuredImage && isValideImageUrl(blogPost.featuredImage) ? blogPost.featuredImage : blogSettings.defaultImage;\r\n\t\t\t}\r\n\r\n\t\t\tfor (const key in tagSettings) {\r\n\t\t\t\tif (settings.hasOwnProperty(key) && tagSettings[key] !== settings[key] && tagSettings[key] !== null) {\r\n\t\t\t\t\tsettings[key] = tagSettings[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* On the IndexPage (all discussions) checks which default image to show based on tag priority */\r\n\t\tconst isIndexPage = m.route.get().split('?')[0] === '/';\r\n\t\tif (isIndexPage) {\r\n\t\t\tconst tags = discussion.tags();\r\n\t\t\tfor (const key in tags) {\r\n\t\t\t\tconst tagId = tags[key].id();\r\n\t\t\t\tconst isChild = tags[key].isChild();\r\n\t\t\t\tconst parent = tags[key].data.hasOwnProperty('relationships') && tags[key].parent() ? tags[key].parent()['data'].id : null;\r\n\t\t\t\tconst position = tags[key].position();\r\n\r\n\t\t\t\tlet tagCustomImg = tags[key].attribute('walsgitDiscussionCardsTagDefaultImage');\r\n\t\t\t\t/* In case Flarum Blog Extension and useBlogImage are activated  */\r\n\t\t\t\tif(blogActivated && Number(settings.useBlogImages) === 1 && blogSettings.tags.includes(tagId)) {\r\n\t\t\t\t\ttagCustomImg = postIsBlogType && blogPost.featuredImage && isValideImageUrl(blogPost.featuredImage) ? blogPost.featuredImage : blogSettings.defaultImage;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst currentTag = { id: tagId, isChild, parent, position, tagCustomImg }\r\n\t\t\t\tlet priorityTag = null;\r\n\t\t\t\tif (!settings.allowedTags.includes(tagId) || tagCustomImg === null) continue;\t\t\t\t\t\r\n\r\n\t\t\t\tif (priorityTag === null || compareTags(currentTag, priorityTag) < 0) {\r\n\t\t\t\t\tpriorityTag = { id: tagId, isChild, parent, position, tagCustomImg };\r\n\t\t\t\t\tsettings.defaultImage = tagCustomImg;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst isRead = Number(settings.markReadCards) === 1 && discussion.isRead() && app.session.user ? \"read\" : \"\";\r\n\t\tconst attrs = {};\r\n\t\tattrs.className =\r\n\t\t\t\"wrapImg\" + (Number(settings.showAuthor) === 1 ? \" After\" : \"\");\r\n\t\tconst image = getPostImage(discussion.firstPost(), settings.defaultImage, postIsBlogType);\r\n\t\tconst media = image ? (\r\n\t\t\t<img\r\n\t\t\t\tsrc={image}\r\n\t\t\t\tclassName=\"previewCardImg\"\r\n\t\t\t\talt={discussion.title()}\r\n\t\t\t\tloading=\"lazy\"\r\n\t\t\t/>\r\n\t\t) : (\r\n\t\t\t<div className=\"imgStub\" />\r\n\t\t);\r\n\r\n\t\t/* Jump to the last relevant post (first unread or last post) */\r\n\t\tconst jumpTo = Math.min(discussion.lastPostNumber() ?? 0, (discussion.lastReadPostNumber() || 0) + 1);\r\n\r\n\t\t/* setting post counts & text */\r\n\t\tconst replyText = discussion.unreadCount() \r\n\t\t\t? app.translator.trans(\"walsgit_discussion_cards.forum.unreadReplies\", { count: discussion.unreadCount()} ) \r\n\t\t\t: app.translator.trans(\"walsgit_discussion_cards.forum.replies\", { count: discussion.replyCount() || \"0\"} );\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tkey={discussion.id()}\r\n\t\t\t\tdata-id={discussion.id()}\r\n\t\t\t\tdata-tag-id={isTagPage ? tagId : null}\r\n\t\t\t\tclassName={\r\n\t\t\t\t\t\"CardsListItem Card \" +\r\n\t\t\t\t\tisRead +\r\n\t\t\t\t\t(discussion.isHidden() ? \" Hidden\" : \"\")\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{DiscussionControls.controls(discussion, this).toArray().length\r\n\t\t\t\t\t? m(\r\n\t\t\t\t\t\t\tDropdown,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ticon: \"fas fa-ellipsis-v\",\r\n\t\t\t\t\t\t\t\tclassName: \"DiscussionListItem-controls\",\r\n\t\t\t\t\t\t\t\tbuttonClassName:\r\n\t\t\t\t\t\t\t\t\t\"Button Button--icon Button--flat Slidable-underneath Slidable-underneath--right\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tDiscussionControls.controls(\r\n\t\t\t\t\t\t\t\tdiscussion,\r\n\t\t\t\t\t\t\t\tthis\r\n\t\t\t\t\t\t\t).toArray()\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t: \"\"}\r\n\t\t\t\t<Link\r\n\t\t\t\t\thref={app.route.discussion(discussion, jumpTo)}\r\n\t\t\t\t\tclassName=\"cardLink\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{Number(settings.showBadges) === 1\r\n\t\t\t\t\t\t? craftBadges(discussion.badges().toArray())\r\n\t\t\t\t\t\t: \"\"}\r\n\r\n\t\t\t\t\t<div {...attrs}>\r\n\t\t\t\t\t\t{(isViewsSet || isViewCountSet) && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{Number(settings.showViews) === 1 &&\r\n\t\t\t\t\t\t\t\t!isNaN(viewsCount) ? (\r\n\t\t\t\t\t\t\t\t\t<div className=\"imageLabel discussionViews\">\r\n\t\t\t\t\t\t\t\t\t\t{icon(\"fas fa-eye\", { className: \"labelIcon\" })}\r\n\t\t\t\t\t\t\t\t\t\t{viewsCount}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{media}\r\n\r\n\t\t\t\t\t\t{Number(settings.showAuthor) === 1 ? (\r\n\t\t\t\t\t\t\t<div className=\"cardFoot\">\r\n\t\t\t\t\t\t\t\t<div className=\"Author\">\r\n\t\t\t\t\t\t\t\t\t{username(discussion.user())}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"Date\">\r\n\t\t\t\t\t\t\t\t\t{humanTime(discussion.createdAt())}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"cardTags\">\r\n\t\t\t\t\t\t{craftTags(discussion.tags())}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"cardTitle\">\r\n\t\t\t\t\t\t<h2 title={discussion.title()} className=\"title\">\r\n\t\t\t\t\t\t\t{Number(settings.allowRepostLinks) === 1 && repostActivated && repostUrl ? <a href={repostUrl} onclick={(e) => e.stopPropagation()}>{truncate(discussion.title(), 80)}</a> : truncate(discussion.title(), 80)}\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{Number(settings.previewText) === 1 && discussion.firstPost() ? (\r\n\t\t\t\t\t\t<div className=\"previewPost\">\r\n\t\t\t\t\t\t\t{blogActivated && Number(settings.useBlogSummary) === 1 && discussion.data.relationships.hasOwnProperty('blogMeta') && discussion.blogMeta().summary() !== ''\r\n\t\t\t\t\t\t\t\t? truncate(discussion.blogMeta().summary(), 150)\r\n\t\t\t\t\t\t\t\t: truncate(discussion.firstPost().contentPlain(), 150)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{Number(settings.showLastPostInfo) === 1 && discussion.firstPost() ? (\r\n\t\t\t\t\t\t<div className=\"terminalPost\">\r\n\t\t\t\t\t\t<TerminalPost discussion={discussion} lastPost={discussion.lastPostNumber()} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t''\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{Number(settings.showReplies) === 1 ? (\r\n\t\t\t\t\t\t<div className=\"cardSpacer\">\r\n\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\tclassName=\"Replies\"\r\n\t\t\t\t\t\t\t\thref={app.route.discussion(\r\n\t\t\t\t\t\t\t\t\tdiscussion,\r\n\t\t\t\t\t\t\t\t\tdiscussion.lastPostNumber()\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div className=\"Left\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"Avatars\">\r\n\t\t\t\t\t\t\t\t\t\t{m(LastReplies, {\r\n\t\t\t\t\t\t\t\t\t\t\tdiscussion: discussion,\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"Repcount\">\r\n\t\t\t\t\t\t\t\t\t\t{replyText}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"Arrow\">\r\n\t\t\t\t\t\t\t\t\t{icon(\"fas fa-angle-right\")}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import Component from 'flarum/common/Component';\r\nimport avatar from 'flarum/common/helpers/avatar';\r\n\r\n\r\nexport default class LastReplies extends Component {\r\n\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n    this.discussion = this.attrs.discussion;\r\n  }\r\n\r\n  view() {\r\n    const discussion = this.discussion;\r\n\r\n    // let's assume that the last 10 posts will be enough for us to identify 3 unique users\r\n    const posts = discussion.posts().splice(-10);\r\n\r\n    const filteredPosts = posts\r\n      .filter((post) => {\r\n        return !post.isHidden() && post.number() !== 1 && post.contentType() === \"comment\";\r\n      })\r\n      .sort((a, b) => b.createdAt() - a.createdAt());\r\n\r\n    const groupedUsers = filteredPosts\r\n      .map(post => post.user())\r\n      .filter((user, i, self) => {\r\n        return self.indexOf(user) === i\r\n      })\r\n      .reverse()\r\n      // last 3 users\r\n      .splice(-3);\r\n\r\n\r\n    return groupedUsers.map(user => {\r\n      return avatar(user, {className: 'Avatar--mini'})\r\n    })\r\n\r\n  }\r\n\r\n}\r\n","import Component from \"flarum/common/Component\";\r\nimport craftBadges from \"../utils/craftBadges\";\r\nimport getPostImage from \"../helpers/getPostImage\";\r\nimport craftTags from \"../utils/craftTags\";\r\nimport humanTime from 'flarum/common/utils/humanTime';\r\nimport icon from 'flarum/common/helpers/icon';\r\nimport username from 'flarum/common/helpers/username';\r\nimport Dropdown from 'flarum/common/components/Dropdown';\r\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\r\nimport Link from 'flarum/common/components/Link';\r\nimport {truncate} from 'flarum/common/utils/string';\r\nimport LastReplies from './LastReplies';\r\nimport compareTags from \"../helpers/compareTags\";\r\nimport isValideImageUrl from \"../helpers/isValideImageUrl\";\r\nimport abbreviateNumber from 'flarum/common/utils/abbreviateNumber';\r\nimport TerminalPost from 'flarum/components/TerminalPost';\r\n\r\n\r\nexport default class listItem extends Component {\r\n\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n  }\r\n\r\n  view() {\r\n    const discussion = this.attrs.discussion;\r\n    const settings = {};\r\n    for (const key in app.forum.data.attributes) {\r\n\t\t\tif (key.startsWith('walsgitDiscussionCards')) {\r\n\t\t\t\tlet newKey = key.replace('walsgitDiscussionCards', '');\r\n\t\t\t\tnewKey = newKey.replace(/^./, newKey.charAt(0).toLowerCase());\r\n\t\t\t\tsettings[newKey] = app.forum.data.attributes[key];\r\n\t\t\t}\r\n\t\t}\r\n\r\n    /* Getting & setting relevant info for 3rd party Views extensions support: Flarumite and MichaelBelgium */\r\n\t\tconst viewsActivated = 'flarumite-simple-discussion-views' in flarum.extensions;\r\n\t\tconst isViewsSet = discussion.data.attributes.hasOwnProperty('views');\r\n\r\n\t\tconst mbViewsActivated = 'michaelbelgium-discussion-views' in flarum.extensions;\r\n\t\tconst isViewCountSet = discussion.data.attributes.hasOwnProperty('viewCount');\r\n\r\n\t\tconst viewsCount = viewsActivated && isViewsSet ? discussion.views() : mbViewsActivated && isViewCountSet ? discussion.viewCount() : NaN;\r\n\r\n    /* Getting & setting relevant info for 3rd party Flarum Blog support */\r\n\t\tconst blogActivated = app.forum.data.attributes.hasOwnProperty('blogTags');\r\n\t\tconst blogSettings = {};\r\n\t\tconst postIsBlogType = discussion.data.relationships.hasOwnProperty('blogMeta');\r\n\t\tconst blogPost = {}\r\n\t\tif(blogActivated) {\r\n\t\t\tblogSettings.tags = app.forum.attribute('blogTags');\r\n\t\t\tblogSettings.defaultImage = app.forum.attribute('blogDefaultImage');\r\n\r\n\t\t\tif(postIsBlogType) {\r\n\t\t\t\tconst blogPostsData = discussion.store.data.blogMeta[discussion.data.relationships.blogMeta.data.id];\r\n\t\t\t\tif(isValideImageUrl(blogPostsData.attribute('featuredImage'))) {\r\n\t\t\t\t\tblogPost.featuredImage = blogPostsData.attribute('featuredImage');\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n    /* Getting & setting relevant info for 3rd party Repost extension */\r\n    const repostActivated = 'shebaoting-repost' in flarum.extensions;\r\n    const repostUrl = discussion.data.attributes.original_url || null;\r\n\r\n    const isTagPage = m.route.get().split('?')[0].startsWith('/t/');\r\n\t\tif (isTagPage) {\r\n      const slug = m.route.get().split('/t/')[1]?.split('?')[0];\r\n      const tagId = app.store.all('tags').find(t => t.slug() === slug).data.id;\r\n      const tag = app.store.all('tags').find(t => t.id() === tagId);\r\n      const tagSettings = tag ? JSON.parse(tag.data.attributes.walsgitDiscussionCardsTagSettings || '{}') : {};\r\n      const tagImage = tag ? tag.data.attributes.walsgitDiscussionCardsTagDefaultImage : null;\r\n      \r\n      tagSettings.defaultImage = tagImage;\r\n      /* In case Flarum Blog Extension and useBlogImage are activated  */\r\n      if(blogActivated && Number(settings.useBlogImages) === 1 && blogSettings.tags.includes(tagId)) {\r\n\t\t\t\ttagSettings.defaultImage = postIsBlogType && blogPost.featuredImage && isValideImageUrl(blogPost.featuredImage) ? blogPost.featuredImage : blogSettings.defaultImage;\r\n\t\t\t}\r\n\r\n      for (const key in tagSettings) {\r\n        if (settings.hasOwnProperty(key) && tagSettings[key] !== settings[key] && tagSettings[key] !== null) {\r\n          settings[key] = tagSettings[key];\r\n        }\r\n      }\r\n    }\r\n\r\n    /* On the IndexPage (all discussions) checks which default image to show based on tag priority */\r\n\t\tconst isIndexPage = m.route.get().split('?')[0] === '/';\r\n\t\tif (isIndexPage) {\r\n\t\t\tconst tags = discussion.tags();\r\n\t\t\tfor (const key in tags) {\r\n\t\t\t\tconst tagId = tags[key].id();\r\n\t\t\t\tconst isChild = tags[key].isChild();\r\n\t\t\t\tconst parent = tags[key].data.hasOwnProperty('relationships') && tags[key].parent() ? tags[key].parent()['data'].id : null;\r\n\t\t\t\tconst position = tags[key].position();\r\n\r\n\t\t\t\tlet tagCustomImg = tags[key].attribute('walsgitDiscussionCardsTagDefaultImage');\r\n        /* In case Flarum Blog Extension and useBlogImage are activated  */\r\n\t\t\t\tif(blogActivated && Number(settings.useBlogImages) === 1 && blogSettings.tags.includes(tagId)) {\r\n\t\t\t\t\ttagCustomImg = postIsBlogType && blogPost.featuredImage && isValideImageUrl(blogPost.featuredImage) ? blogPost.featuredImage : blogSettings.defaultImage;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst currentTag = { id: tagId, isChild, parent, position, tagCustomImg }\r\n\t\t\t\tlet priorityTag = null;\r\n\t\t\t\tif (!settings.allowedTags.includes(tagId) || tagCustomImg === null)\tcontinue;\r\n\r\n\t\t\t\tif (priorityTag === null || compareTags(currentTag, priorityTag) < 0) {\r\n\t\t\t\t\tpriorityTag = { id: tagId, isChild, parent, position, tagCustomImg };\r\n\t\t\t\t\tsettings.defaultImage = tagCustomImg;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n    const isRead = Number(settings.markReadCards) === 1 && (discussion.isRead() && app.session.user) ? 'read' : '';\r\n    const attrs = {};\r\n    attrs.className = \"wrapImg\" + (Number(settings.showAuthor) === 1 ? \" After\" : '');\r\n    const image = getPostImage(discussion.firstPost(), settings.defaultImage, postIsBlogType);\r\n    const media = image\r\n      ? <img src={image}\r\n            className=\"previewCardImg\"\r\n            alt={discussion.title()}\r\n            loading=\"lazy\"/>\r\n      : <div className=\"imgStub\"/>\r\n\r\n    /* Jump to the last relevant post (first unread or last post) */\r\n    const jumpTo = Math.min(discussion.lastPostNumber() ?? 0, (discussion.lastReadPostNumber() || 0) + 1);\r\n\r\n    /* setting post counts & text */\r\n\t\tconst replyText = discussion.unreadCount() \r\n\t\t\t? app.translator.trans(\"walsgit_discussion_cards.forum.unreadReplies\", { count: discussion.unreadCount()} ) \r\n\t\t\t: app.translator.trans(\"walsgit_discussion_cards.forum.replies\", { count: discussion.replyCount() || \"0\"} );\r\n    const postCount = discussion.unreadCount() ? discussion.unreadCount() + \"*\" : discussion.replyCount();\r\n\r\n    return (\r\n      <div key={discussion.id()}\r\n          data-id={discussion.id()}\r\n          className={\"CardsListItem List \" + isRead + (discussion.isHidden() ? \" Hidden\" : \"\")}>\r\n        {DiscussionControls.controls(discussion, this).toArray().length\r\n          ? m(Dropdown, {\r\n            icon: 'fas fa-ellipsis-v',\r\n            className: 'DiscussionListItem-controls',\r\n            buttonClassName: 'Button Button--icon Button--flat Slidable-underneath Slidable-underneath--right',\r\n          }, DiscussionControls.controls(discussion, this).toArray())\r\n          : ''}\r\n        <Link href={app.route.discussion(discussion, jumpTo)}\r\n              className=\"cardLink\">\r\n\r\n          {Number(settings.showBadges) === 1\r\n            ? craftBadges(discussion.badges().toArray())\r\n            : ''}\r\n\r\n          <div className=\"cardGrid\">\r\n\r\n            <div className=\"rowSpan-3 colSpan\">\r\n              <div {...attrs}>\r\n                {(isViewsSet || isViewCountSet) && (\r\n                  <>\r\n                  {Number(settings.showViews) === 1 && !isNaN(viewsCount)\r\n                    ? <div className=\"imageLabel discussionViews\">\r\n                      {icon('fas fa-eye', {className: 'labelIcon'})}\r\n                      {viewsCount}\r\n                    </div>\r\n                    : ''}\r\n                  </>\r\n                )}\r\n                \r\n                {media}\r\n\r\n                {Number(settings.showAuthor) === 1\r\n                  ? <div className=\"cardFoot\">\r\n                    <div className=\"Author\">\r\n                      {username(discussion.user())}\r\n                    </div>\r\n                    <div className=\"Date\">\r\n                      {humanTime(discussion.createdAt())}\r\n                    </div>\r\n                  </div>\r\n                  : ''}\r\n\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"rowSpan-3 colSpan-2\">\r\n\r\n              <div className=\"flexBox\">\r\n                <div className=\"cardTitle\">\r\n                  <h2 title={discussion.title()} className=\"title\">\r\n                    {Number(settings.allowRepostLinks) === 1 && repostActivated && repostUrl ? <a href={repostUrl} onclick={(e) => e.stopPropagation()}>{truncate(discussion.title(), 80)}</a> : truncate(discussion.title(), 80)}\r\n                  </h2>\r\n                  {app.screen() !== 'phone' && Number(settings.showReplies) === 1 && Number(settings.showRepliesOnRight) === 1 ?\r\n                  <div className=\"DiscussionListItem-count\">\r\n                    <span aria-hidden=\"true\">{abbreviateNumber(postCount)}</span>\r\n\r\n                    <span className=\"visually-hidden\">\r\n                      {app.translator.trans('core.forum.discussion_list.unread_replies_a11y_label', { count: discussion.replyCount() })}\r\n                    </span>\r\n                  </div>\r\n                : ''}\r\n                </div>\r\n                <div className=\"cardTags\">{craftTags(discussion.tags())}</div>\r\n              </div>\r\n\r\n              {Number(settings.previewText) === 1 && discussion.firstPost() ? (\r\n                <div className=\"previewPost\">\r\n                  {blogActivated && Number(settings.useBlogSummary) === 1 && discussion.data.relationships.hasOwnProperty('blogMeta') && discussion.blogMeta().summary() !== ''\r\n                    ? truncate(discussion.blogMeta().summary(), 150)\r\n                    : truncate(discussion.firstPost().contentPlain(), 150)\r\n                  }\r\n                </div>\r\n                ) : (\r\n                  ''\r\n                )}\r\n                \r\n              {Number(settings.showLastPostInfo) === 1 && discussion.firstPost() ? (\r\n                <div className=\"terminalPost\">\r\n                  <TerminalPost discussion={discussion} lastPost={discussion.lastPostNumber()} />\r\n                </div>\r\n              ) : (\r\n                ''\r\n              )}\r\n\r\n              {app.screen() === 'phone' && Number(settings.showReplies) === 1\r\n                ? <div className=\"cardSpacer\">\r\n                  <Link\r\n                    className=\"Replies\"\r\n                    href={app.route.discussion(discussion, discussion.lastPostNumber())}>\r\n                    <div className=\"Left\">\r\n                      <div className=\"Avatars\">\r\n                        {m(LastReplies, {discussion: discussion})}\r\n                      </div>\r\n                      <div className=\"Repcount\">\r\n                        {replyText}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"Arrow\">\r\n                      {icon('fas fa-angle-right')}\r\n                    </div>\r\n                  </Link>\r\n                </div>\r\n                : Number(settings.showReplies) === 1 && !Number(settings.showRepliesOnRight) ?\r\n                  <div className=\"imageLabel discussionReplyCount\">\r\n                    {icon('fas fa-comment', {className: 'labelIcon'})}\r\n                    {postCount}\r\n                  </div> : ''\r\n              }\r\n            </div>\r\n          </div>\r\n        </Link>\r\n      </div>\r\n    );\r\n\r\n  }\r\n\r\n}\r\n","export default function checkOverflowingTags() {\r\n    const cardListItemsOnPrimary = document.querySelectorAll(\".CardsListItem.Card .cardLink\");\r\n    const cardListItems = document.querySelectorAll(\".cardGrid .colSpan-2\");\r\n\r\n    const toggleOverflowClass = function(cardTags, cardListItem) {\r\n        if (!cardTags) return;\r\n\r\n        if (cardTags.scrollWidth > cardListItem.clientWidth - 30) { // -30 to account for the 15px + 15px margins on .cardTags\r\n        cardTags.classList.add(\"overflowing\");\r\n        } else {\r\n        cardTags.classList.remove(\"overflowing\");\r\n        }\r\n    }\r\n\r\n    cardListItemsOnPrimary.forEach(cardListItem => {\r\n        const cardTags = cardListItem.querySelector(\".cardTags\");\r\n\r\n        toggleOverflowClass(cardTags, cardListItem);\r\n    });\r\n\r\n    cardListItems.forEach(cardListItem => {\r\n        const cardTags = cardListItem.querySelector(\".flexBox .cardTags\");\r\n\r\n        toggleOverflowClass(cardTags, cardListItem);\r\n    });\r\n}","export default function compareTags(currentTag, priorityTag) {\r\n    if (currentTag.isChild && !priorityTag.isChild) return -1;\r\n    if (!currentTag.isChild && priorityTag.isChild) return 1;\r\n    if (currentTag.isChild && priorityTag.isChild && currentTag.parent === priorityTag.parent) return currentTag.position - priorityTag.position;\r\n    if (currentTag.isChild && priorityTag.isChild && currentTag.parent !== priorityTag.parent) return currentTag.parent - priorityTag.parent;\r\n\r\n    if (!currentTag.position && priorityTag.position) return 1;\r\n    if (currentTag.position && !priorityTag.position) return -1;\r\n    if (currentTag.position && priorityTag.position) return currentTag.position - priorityTag.position;\r\n    return currentTag.id - priorityTag.id;\r\n}","import isValideImageUrl from \"./isValideImageUrl\";\r\n\r\nexport default function getPostImage(post, image, isblogPost = false, key = 1) {\r\n\r\n  const regex = /<img(?!.*?class=\"emoji\").*?src=[\\'\"](.*?)[\\'\"].*?>|background(?:-image)?:\\s*url\\(['\"]?(.*?)['\"]?\\)/i;\r\n\r\n  if(isblogPost && isValideImageUrl(image)) {\r\n    return image;\r\n  }\r\n\r\n  const assetImage = app.forum.attribute(\"baseUrl\") + \"/assets/\" + image;\r\n\r\n  if (post) {\r\n    const src = regex.exec(post.contentHtml());\r\n    if (typeof key === \"number\" && key > 0) {\r\n      return (src) ? (src[1] || src[2]) : (image ? assetImage : null);\r\n    } else if (key === '~') {\r\n      return src;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n}\r\n","export default function isValideImageUrl (url) {\r\n    if(typeof url !== 'string') return false;\r\n    \r\n    const imageExtensions = ['jpg', 'jpeg', 'png', 'gif', 'webp', 'bmp', 'svg'];\r\n\r\n    if (!url.startsWith('http://') && !url.startsWith('https://')) {\r\n        url = 'http://' + url;\r\n    }\r\n\r\n    let parsedUrl;\r\n    try {\r\n        parsedUrl = new URL(url);\r\n    } catch {\r\n        return false;\r\n    }\r\n\r\n    const extension = parsedUrl.pathname.split('.').pop().toLowerCase();\r\n    return imageExtensions.includes(extension);\r\n}","import app from 'flarum/app';\r\nimport {extend, override} from 'flarum/extend';\r\nimport DiscussionList from 'flarum/forum/components/DiscussionList';\r\nimport DiscussionListState from 'flarum/forum/states/DiscussionListState';\r\nimport IndexPage from 'flarum/forum/components/IndexPage';\r\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\r\nimport Placeholder from 'flarum/common/components/Placeholder';\r\nimport Button from 'flarum/common/components/Button';\r\nimport CardItem from './components/CardItem';\r\nimport ListItem from './components/ListItem';\r\nimport checkOverflowingTags from './helpers/checkOverflowingTags';\r\n\r\napp.initializers.add('walsgit/discussion/cards', () => {\r\n\r\n  extend(DiscussionList.prototype, 'oncreate', checkOverflowingTags);\r\n  extend(DiscussionList.prototype, 'onupdate', checkOverflowingTags);\r\n\r\n  extend(DiscussionListState.prototype, 'requestParams', function (params) {\r\n    if (app.current.matches(IndexPage)) {\r\n      params.include.push(['firstPost', 'posts', 'posts.user']);\r\n    }\r\n  });\r\n\r\n  override(DiscussionList.prototype, 'view', function (original) {\r\n    const settings = {};\r\n    for (const key in app.forum.data.attributes) {\r\n      if (key.startsWith('walsgitDiscussionCards')) {\r\n        let newKey = key.replace('walsgitDiscussionCards', '');\r\n        newKey = newKey.replace(/^./, newKey.charAt(0).toLowerCase());\r\n        settings[newKey] = app.forum.data.attributes[key];\r\n      }\r\n    }\r\n    const state = this.attrs.state;\r\n    const params = state.getParams();\r\n    let loading;\r\n    if (state.isInitialLoading() || state.isLoadingNext()) {\r\n      loading = <LoadingIndicator/>;\r\n    } else if (state.hasNext()) {\r\n      loading = Button.component(\r\n        {\r\n          className: 'Button',\r\n          onclick: state.loadNext.bind(state),\r\n        },\r\n        app.translator.trans('core.forum.discussion_list.load_more_button')\r\n      );\r\n    }\r\n    if (state.isEmpty()) {\r\n      const text = app.translator.trans('core.forum.discussion_list.empty_text');\r\n      return <div className=\"DiscussionList\">{m(Placeholder, {text})}</div>;\r\n    }\r\n    const isTagPage = m.route.get().split('?')[0].startsWith('/t/');\r\n    let tag = null;\r\n    if (isTagPage) {\r\n      tag = app.store.all('tags').find(t => t.slug() === params.tags).data.id;\r\n      const tagSettings = JSON.parse(app.store.all('tags').find(t => t.slug() === params.tags).data.attributes.walsgitDiscussionCardsTagSettings);\r\n      for (const key in tagSettings) {\r\n        if (settings.hasOwnProperty(key) && tagSettings[key] !== settings[key]) {\r\n          settings[key] = tagSettings[key];\r\n        }\r\n      }\r\n    }\r\n    if (app.current.matches(IndexPage) && ((settings.allowedTags.length && settings.allowedTags.includes(tag)) || (!params.tags && Number(settings.onIndexPage) === 1))) {\r\n      return (\r\n        <div className={'DiscussionList' + (state.isSearchResults() ? ' DiscussionList--searchResults' : '')}>\r\n          <div class=\"DiscussionList-discussions flexCard\">\r\n            {state.getPages().map((pg, o) => {\r\n              return pg.items.map((discussion, i) => {\r\n                return (i < Number(settings.primaryCards) && o === 0)\r\n                  ? m(CardItem, {discussion: discussion})\r\n                  : m(ListItem, {discussion: discussion})\r\n              });\r\n            })}\r\n          </div>\r\n          <div className=\"DiscussionList-loadMore\">{loading}</div>\r\n        </div>\r\n      );\r\n\r\n    } else {\r\n      return original();\r\n    }\r\n  })\r\n}, -1);\r\n\r\n\r\n// Expose compat API\r\nimport extCompat from './compat';\r\nimport {compat} from '@flarum/core/forum';\r\n\r\nObject.assign(compat, extCompat);\r\n","import icon from 'flarum/common/helpers/icon';\r\nimport Tooltip from 'flarum/common/components/Tooltip';\r\n\r\nexport default function craftBadges(badges) {\r\n  if (badges.length) {\r\n    return [m('.cardBadges', [badges.map((badge) => {\r\n      return [\r\n        m(Tooltip, {\r\n          text: badge.attrs.label ? badge.attrs.label[0] : '',\r\n          position: 'right'\r\n        },\r\n        m('span.cardBadge.Badge.Badge--' + badge.attrs.type, [icon(badge.attrs.icon)]))]\r\n    })])];\r\n  }\r\n};\r\n","import Link from 'flarum/common/components/Link';\r\nimport sortTags from 'flarum/tags/utils/sortTags';\r\n\r\nexport default function craftTags(tags) {\r\n  if (tags) {\r\n    return [sortTags(tags).map(function (tag) {\r\n      return [\r\n        <Link className=\"cardTag\"\r\n              style={{backgroundColor: tag.color()}}\r\n              href={app.route('tag', {tags: tag.slug()})}>\r\n          {tag.name()}\r\n        </Link>\r\n      ]\r\n    })];\r\n  }\r\n};\r\n","module.exports = flarum.core;","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Dropdown'];","module.exports = flarum.core.compat['common/components/Link'];","module.exports = flarum.core.compat['common/components/LoadingIndicator'];","module.exports = flarum.core.compat['common/components/Placeholder'];","module.exports = flarum.core.compat['common/components/Tooltip'];","module.exports = flarum.core.compat['common/helpers/avatar'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/helpers/username'];","module.exports = flarum.core.compat['common/utils/abbreviateNumber'];","module.exports = flarum.core.compat['common/utils/humanTime'];","module.exports = flarum.core.compat['common/utils/string'];","module.exports = flarum.core.compat['components/TerminalPost'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['forum/components/DiscussionList'];","module.exports = flarum.core.compat['forum/components/IndexPage'];","module.exports = flarum.core.compat['forum/states/DiscussionListState'];","module.exports = flarum.core.compat['forum/utils/DiscussionControls'];","module.exports = flarum.core.compat['tags/utils/sortTags'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/*\r\n * This file is part of Flarum.\r\n *\r\n * (c) Toby Zerner <toby.zerner@gmail.com>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code.\r\n */\r\n\r\nexport * from './src/forum';\r\n"],"names":["CardItem","ListItem","LastReplies","craftTags","craftBadges","Component","getPostImage","humanTime","icon","username","Dropdown","DiscussionControls","Link","truncate","compareTags","isValideImageUrl","TerminalPost","cardItem","_Component","apply","arguments","_inheritsLoose","_proto","prototype","oninit","vnode","call","discussion","attrs","view","_discussion$lastPostN","settings","key","app","forum","data","attributes","startsWith","newKey","replace","charAt","toLowerCase","viewsActivated","flarum","extensions","isViewsSet","hasOwnProperty","mbViewsActivated","isViewCountSet","viewsCount","views","viewCount","NaN","blogActivated","blogSettings","postIsBlogType","relationships","blogPost","tags","attribute","defaultImage","blogPostsData","store","blogMeta","id","featuredImage","repostActivated","repostUrl","original_url","isTagPage","m","route","get","split","tagId","_m$route$get$split$","slug","all","find","t","tag","tagSettings","JSON","parse","walsgitDiscussionCardsTagSettings","tagImage","walsgitDiscussionCardsTagDefaultImage","Number","useBlogImages","includes","isIndexPage","isChild","parent","position","tagCustomImg","currentTag","priorityTag","allowedTags","isRead","markReadCards","session","user","className","showAuthor","image","firstPost","media","src","alt","title","loading","jumpTo","Math","min","lastPostNumber","lastReadPostNumber","replyText","unreadCount","translator","trans","count","replyCount","isHidden","controls","toArray","length","buttonClassName","href","showBadges","badges","'['","showViews","isNaN","createdAt","allowRepostLinks","onclick","e","stopPropagation","previewText","useBlogSummary","summary","contentPlain","showLastPostInfo","lastPost","showReplies","default","avatar","posts","splice","filteredPosts","filter","post","number","contentType","sort","a","b","groupedUsers","map","i","self","indexOf","reverse","abbreviateNumber","listItem","postCount","screen","showRepliesOnRight","checkOverflowingTags","cardListItemsOnPrimary","document","querySelectorAll","cardListItems","toggleOverflowClass","cardTags","cardListItem","scrollWidth","clientWidth","classList","add","remove","forEach","querySelector","isblogPost","regex","assetImage","exec","contentHtml","url","imageExtensions","parsedUrl","URL","_unused","extension","pathname","pop","extend","override","DiscussionList","DiscussionListState","IndexPage","LoadingIndicator","Placeholder","Button","initializers","params","current","matches","include","push","original","state","getParams","isInitialLoading","isLoadingNext","hasNext","component","loadNext","bind","isEmpty","text","onIndexPage","isSearchResults","getPages","pg","o","items","primaryCards","extCompat","compat","Object","assign","Tooltip","badge","label","type","sortTags","style","backgroundColor","color","name","setPrototypeOf","create","constructor","_setPrototypeOf","__proto__"],"sourceRoot":""}