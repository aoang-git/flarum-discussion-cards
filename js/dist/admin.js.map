{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@walsgit/flarum-discussion-cards/webpack/bootstrap","webpack://@walsgit/flarum-discussion-cards/webpack/runtime/compat get default export","webpack://@walsgit/flarum-discussion-cards/webpack/runtime/define property getters","webpack://@walsgit/flarum-discussion-cards/webpack/runtime/hasOwnProperty shorthand","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['app']\"","webpack://@walsgit/flarum-discussion-cards/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@walsgit/flarum-discussion-cards/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['admin/app']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['admin/components/UploadImageButton']\"","webpack://@walsgit/flarum-discussion-cards/./src/admin/helpers/isExtensionInstalled.js","webpack://@walsgit/flarum-discussion-cards/./src/admin/helpers/isExtensionActive.js","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@walsgit/flarum-discussion-cards/./src/admin/components/Settings.js","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['extend']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/Model']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/components/Button']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['tags/models/Tag']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['tags/components/EditTagModal']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@walsgit/flarum-discussion-cards/./src/admin/components/WdcTagSettingsModal.js","webpack://@walsgit/flarum-discussion-cards/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@walsgit/flarum-discussion-cards/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@walsgit/flarum-discussion-cards/./src/admin/components/UploadTagImageButton.js","webpack://@walsgit/flarum-discussion-cards/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['app'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/UploadImageButton'];","export default function isExtensionInstalled(extensionName) {\r\n    if (app.data.extensions.hasOwnProperty(extensionName)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}","export default function isExtensionActive(extensionName) {\r\n    if (app.data.settings.extensions_enabled.includes(extensionName)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import app from \"flarum/admin/app\";\r\nimport ExtensionPage from \"flarum/admin/components/ExtensionPage\";\r\nimport UploadImageButton from 'flarum/admin/components/UploadImageButton';\r\nimport isExtensionInstalled from \"../helpers/isExtensionInstalled\";\r\nimport isExtensionActive from \"../helpers/isExtensionActive\";\r\nimport icon from \"flarum/common/helpers/icon\";\r\n\r\nexport default class Settings extends ExtensionPage {\r\n\tcontent() {\r\n\t\t/* Supported third party extensions' info */\r\n\t\tconst viewsExtension = {\r\n\t\t\tid: 'flarumite-simple-discussion-views',\r\n\t\t\tname: 'Flarumite Simple Discussion Views',\r\n\t\t\turl: 'https://flarum.org/extension/flarumite/simple-discussion-views',\r\n\t\t};\r\n\t\tconst mbViewsExtension = {\r\n\t\t\tid: 'michaelbelgium-discussion-views',\r\n\t\t\tname: 'michaelbelgium/flarum-discussion-views',\r\n\t\t\turl: 'https://flarum.org/extension/michaelbelgium/flarum-discussion-views',\r\n\t\t};\r\n\t\tconst blogExtension = {\r\n\t\t\tid: 'v17development-blog',\r\n\t\t\tname: 'Flarum Blog',\r\n\t\t\turl: 'https://flarum.org/extension/v17development/flarum-blog',\r\n\t\t};\r\n\t\tconst repostExtension = {\r\n\t\t\tid: 'shebaoting-repost',\r\n\t\t\tname: 'Repost',\r\n\t\t\turl: 'https://flarum.org/extension/shebaoting/repost',\r\n\t\t};\r\n\r\n\t\tconst warningIcon = icon(\"fas fa-exclamation-triangle\");\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"DiscussionCardsSettings\">\r\n\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t<div className=\"DiscussionCardsSettings--content\">\r\n\t\t\t\t\t\t<h3>{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.where_title\")}</h3>\r\n\t\t\t\t\t\t<p className=\"helpText\">\r\n\t\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.where_info\")}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<div className=\"Section\">\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"flarum-tags.select-tags\",\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_allowedTags\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.allowedTags_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.allowedTags_help\"),\r\n\t\t\t\t\t\t\t\toptions: {\r\n\t\t\t\t\t\t\t\t\trequireParentTag: false,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"switch\",\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_onIndexPage\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.onIndexPage_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.onIndexPage_help\"),\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<h3>{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.primaryCardOptions_title\")}</h3>\r\n\t\t\t\t\t\t<p className=\"helpText\">\r\n\t\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.primaryCardOptions_info\")}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<div className=\"Section\">\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"number\",\r\n\t\t\t\t\t\t\t\tclassName: 'DC-Number',\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_primaryCards\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.primaryCards_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.primaryCards_help\"),\r\n\t\t\t\t\t\t\t\tmin: 0,\r\n\t\t\t\t\t\t\t\tstep: 1,\r\n\t\t\t\t\t\t\t\tplaceholder: 4,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"number\",\r\n\t\t\t\t\t\t\t\tclassName: 'DC-Number',\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_desktopCardWidth\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.desktopCardWidth_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.desktopCardWidth_help\"),\r\n\t\t\t\t\t\t\t\tmin: 10,\r\n\t\t\t\t\t\t\t\tmax: 100,\r\n\t\t\t\t\t\t\t\tstep: 1,\r\n\t\t\t\t\t\t\t\tplaceholder: 49,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"number\",\r\n\t\t\t\t\t\t\t\tclassName: 'DC-Number',\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_tabletCardWidth\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.tabletCardWidth_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.tabletCardWidth_help\"),\r\n\t\t\t\t\t\t\t\tmin: 10,\r\n\t\t\t\t\t\t\t\tmax: 100,\r\n\t\t\t\t\t\t\t\tstep: 1,\r\n\t\t\t\t\t\t\t\tplaceholder: 49,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<h3>{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.cardOptions_title\")}</h3>\r\n\t\t\t\t\t\t<p className=\"helpText\">\r\n\t\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.cardOptions_info\")}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<div className=\"Section\">\r\n\t\t\t\t\t\t\t<div className=\"DC-DefaultImageSettings\">\r\n\t\t\t\t\t\t\t\t<h4>{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.defaultImage_title\")}</h4>\r\n\t\t\t\t\t\t\t\t<p className=\"helpText\">\r\n\t\t\t\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.defaultImage_info\")}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t{app.forum.attribute(\"walsgitDiscussionCardsDefaultImage\") === null \r\n\t\t\t\t\t\t\t\t\t? <div className=\"imgStub\"></div> \r\n\t\t\t\t\t\t\t\t\t: <img className=\"DC-UserUploadedImage\" src={app.forum.attribute(\"baseUrl\") + \"/assets/\" + app.forum.attribute(\"walsgitDiscussionCardsDefaultImage\")}/>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t{m(UploadImageButton, {name: \"walsgit_discussion_cards_default_image\", class: \"DC-UploadImageBtn\"})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"number\",\r\n\t\t\t\t\t\t\t\tclassName: 'DC-Number',\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_maxListImages\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.maxListImages_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.maxListImages_help\"),\r\n\t\t\t\t\t\t\t\tmin: 0,\r\n\t\t\t\t\t\t\t\tmax: 5,\r\n\t\t\t\t\t\t\t\tstep: 1,\r\n\t\t\t\t\t\t\t\tplaceholder: 3,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"switch\",\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_previewText\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.previewText_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.previewText_help\"),\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"switch\",\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_showAuthor\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.showAuthor_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.showAuthor_help\"),\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"switch\",\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_showReplies\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.showReplies_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.showReplies_help\"),\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"switch\",\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_showRepliesOnRight\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.showRepliesOnRight_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.showRepliesOnRight_help\"),\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"switch\",\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_showLastPostInfo\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.showLastPostInfo_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.showLastPostInfo_help\"),\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"switch\",\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_showBadges\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.showBadges_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.showBadges_help\"),\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"switch\",\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_markReadCards\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.markReadCards_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.markReadCards_help\"),\r\n\t\t\t\t\t\t\t})}\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{/* 3rd party extensions options */}\r\n\t\t\t\t\t\t<h3>{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.otherOptions_title\")}</h3>\r\n\t\t\t\t\t\t<p className=\"helpText\">\r\n\t\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.otherOptions_info\")}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{/* flarumite/simple-discussion-views OR michaelbelgium/flarum-ext-discussion-views */}\r\n\t\t\t\t\t\t<div className=\"Section\">\r\n\t\t\t\t\t\t\t<h4>\r\n\t\t\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.showViews_title_start\")}\r\n\t\t\t\t\t\t\t\t<a href={viewsExtension.url} target=\"_blank\" rel=\"noopener noreferrer\">{viewsExtension.name}</a>\r\n\t\t\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.showViews_title_or\")}\r\n\t\t\t\t\t\t\t\t<a href={mbViewsExtension.url} target=\"_blank\" rel=\"noopener noreferrer\">{mbViewsExtension.name}</a>\r\n\t\t\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.showViews_title_end\")}\r\n\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t<div className=\"helpText\">\r\n\t\t\t\t\t\t\t\t<em>\r\n\t\t\t\t\t\t\t\t\t{!isExtensionInstalled(viewsExtension.id) && !isExtensionInstalled(mbViewsExtension.id)\r\n\t\t\t\t\t\t\t\t\t? app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.viewsExtension_notInstalled\", {icon: warningIcon}) : \r\n\t\t\t\t\t\t\t\t\t(isExtensionInstalled(viewsExtension.id) && !isExtensionActive(viewsExtension.id)) || (isExtensionInstalled(mbViewsExtension.id) && !isExtensionActive(mbViewsExtension.id)) \r\n\t\t\t\t\t\t\t\t\t? app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.viewsExtension_notActivated\", {icon: warningIcon}) :\r\n\t\t\t\t\t\t\t\t\t''}\r\n\t\t\t\t\t\t\t\t</em>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"switch\",\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_showViews\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.showViews_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.showViews_help\"),\r\n\t\t\t\t\t\t\t\tdisabled: isExtensionActive(viewsExtension.id) || isExtensionActive(mbViewsExtension.id) ? false : true,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t<hr></hr>\r\n\t\t\t\t\t\t\t{/* v17development/flarum-blog */}\r\n\t\t\t\t\t\t\t<h4>\r\n\t\t\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.blogExtension_title_start\")}\r\n\t\t\t\t\t\t\t\t<a href={blogExtension.url} target=\"_blank\" rel=\"noopener noreferrer\">{blogExtension.name}</a>\r\n\t\t\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.blogExtension_title_end\")}\r\n\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t<div className=\"helpText\">\r\n\t\t\t\t\t\t\t\t<em>\r\n\t\t\t\t\t\t\t\t\t{!isExtensionInstalled(blogExtension.id) \r\n\t\t\t\t\t\t\t\t\t? app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.blogExtension_notInstalled\", {icon: warningIcon}) : \r\n\t\t\t\t\t\t\t\t\t!isExtensionActive(blogExtension.id) \r\n\t\t\t\t\t\t\t\t\t? app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.blogExtension_notActivated\", {icon: warningIcon}) :\r\n\t\t\t\t\t\t\t\t\t''}\r\n\t\t\t\t\t\t\t\t</em>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"switch\",\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_useBlogImages\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.useBlogImages_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.useBlogImages_help\"),\r\n\t\t\t\t\t\t\t\tdisabled: isExtensionActive(blogExtension.id) ? false : true,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"switch\",\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_useBlogSummary\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.useBlogSummary_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.useBlogSummary_help\"),\r\n\t\t\t\t\t\t\t\tdisabled: isExtensionActive(blogExtension.id) ? false : true,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t<hr></hr>\r\n\t\t\t\t\t\t\t{/* shebaoting/repost */}\r\n\t\t\t\t\t\t\t<h4>\r\n\t\t\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.repostExtension_title_start\")}\r\n\t\t\t\t\t\t\t\t<a href={repostExtension.url} target=\"_blank\" rel=\"noopener noreferrer\">{repostExtension.name}</a>\r\n\t\t\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.repostExtension_title_end\")}\r\n\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t<div className=\"helpText\">\r\n\t\t\t\t\t\t\t\t<em>\r\n\t\t\t\t\t\t\t\t\t{!isExtensionInstalled(repostExtension.id) \r\n\t\t\t\t\t\t\t\t\t? app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.repostExtension_notInstalled\", {icon: warningIcon}) : \r\n\t\t\t\t\t\t\t\t\t!isExtensionActive(repostExtension.id) \r\n\t\t\t\t\t\t\t\t\t? app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.repostExtension_notActivated\", {icon: warningIcon}) :\r\n\t\t\t\t\t\t\t\t\t''}\r\n\t\t\t\t\t\t\t\t</em>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{this.buildSettingComponent({\r\n\t\t\t\t\t\t\t\ttype: \"switch\",\r\n\t\t\t\t\t\t\t\tsetting: \"walsgit_discussion_cards_allowRepostLinks\",\r\n\t\t\t\t\t\t\t\tlabel: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.allowRepostLinks_label\"),\r\n\t\t\t\t\t\t\t\thelp: app.translator.trans(\"walsgit_discussion_cards.admin.settings.general.allowRepostLinks_help\"),\r\n\t\t\t\t\t\t\t\tdisabled: isExtensionActive(repostExtension.id) ? false : true,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{this.submitButton()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tonsubmit() {\r\n\t\tconst primaryCards = this.setting('walsgit_discussion_cards_primaryCards')();\r\n\t\tconst desktopCardWidth = this.setting('walsgit_discussion_cards_desktopCardWidth')();\r\n\t\tconst tabletCardWidth = this.setting('walsgit_discussion_cards_tabletCardWidth')();\r\n\t\tconst maxListImages = this.setting('walsgit_discussion_cards_maxListImages')();\r\n\r\n\t\t// 验证 primaryCards（允许空值，空值会使用默认值 0）\r\n\t\tif (primaryCards !== '' && primaryCards !== null) {\r\n\t\t\tconst num = Number(primaryCards);\r\n\t\t\tif (isNaN(num) || num < 0) {\r\n\t\t\t\tapp.alerts.show({ type: 'error' }, app.translator.trans('walsgit_discussion_cards.admin.errors.primaryCards'));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// 验证 desktopCardWidth（允许空值，空值会使用默认值 49）\r\n\t\tif (desktopCardWidth !== '' && desktopCardWidth !== null) {\r\n\t\t\tconst num = Number(desktopCardWidth);\r\n\t\t\tif (isNaN(num) || num < 10 || num > 100) {\r\n\t\t\t\tapp.alerts.show({ type: 'error' }, app.translator.trans('walsgit_discussion_cards.admin.errors.desktopCardWidth'));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// 验证 tabletCardWidth（允许空值，空值会使用默认值 49）\r\n\t\tif (tabletCardWidth !== '' && tabletCardWidth !== null) {\r\n\t\t\tconst num = Number(tabletCardWidth);\r\n\t\t\tif (isNaN(num) || num < 10 || num > 100) {\r\n\t\t\t\tapp.alerts.show({ type: 'error' }, app.translator.trans('walsgit_discussion_cards.admin.errors.tabletCardWidth'));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// 验证 maxListImages（允许空值，空值会使用默认值 3）\r\n\t\tif (maxListImages !== '' && maxListImages !== null) {\r\n\t\t\tconst num = Number(maxListImages);\r\n\t\t\tif (isNaN(num) || num < 0 || num > 5) {\r\n\t\t\t\tapp.alerts.show({ type: 'error' }, app.translator.trans('walsgit_discussion_cards.admin.errors.maxListImages'));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n        return true;\r\n    }\r\n\r\n\tsaveSettings(e) {\r\n        if (!this.onsubmit()) {\r\n            return;\r\n        }\r\n\t\tconst settings = this.dirty();\r\n\r\n        super.saveSettings(e)\r\n\t\t.then(() => {\r\n\t\t\tconst newSettings = {};\r\n\t\t\tfor (const key in settings) {\r\n\t\t\t\tlet endOfKey = key.replace('walsgit_discussion_cards_', '');\r\n\t\t\t\tendOfKey = endOfKey.replace(/^./, endOfKey.charAt(0).toUpperCase());\r\n\t\t\t\tconst newKey = 'walsgitDiscussionCards' + endOfKey;\r\n\t\t\t\tnewSettings[newKey] = settings[key];\r\n\t\t\t}\r\n\t\t\tapp.forum.pushAttributes(newSettings);\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t});\r\n    }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/models/Tag'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/components/EditTagModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","import Button from \"flarum/common/components/Button\";\r\nimport Modal from \"flarum/common/components/Modal\";\r\nimport Stream from \"flarum/common/utils/Stream\";\r\n\r\nlet defaultSettings = {};\r\n\r\nexport default class WdcTagSettingsModal extends Modal {\r\n\toninit(vnode) {\r\n\t\tsuper.oninit(vnode);\r\n\r\n\t\tthis.tagSettings = JSON.parse(this.attrs.model.data.attributes.walsgitDiscussionCardsTagSettings || null) || {};\r\n\r\n\t\tdefaultSettings = {\r\n\t\t\tprimaryCards: app.forum.data.attributes.walsgitDiscussionCardsPrimaryCards,\r\n\t\t\tdesktopCardWidth: app.forum.data.attributes.walsgitDiscussionCardsDesktopCardWidth,\r\n\t\t\ttabletCardWidth: app.forum.data.attributes.walsgitDiscussionCardsTabletCardWidth,\r\n\t\t}\r\n\t\t\r\n\t\tif (!this.tagSettings.hasOwnProperty('primaryCards') || this.tagSettings.primaryCards === null) {\r\n\t\t\tthis.tagSettings.primaryCards = defaultSettings.primaryCards;\r\n\t\t}\r\n\t\tif (!this.tagSettings.hasOwnProperty('desktopCardWidth') || this.tagSettings.desktopCardWidth === null) {\r\n\t\t\tthis.tagSettings.desktopCardWidth = defaultSettings.desktopCardWidth;\r\n\t\t}\r\n\t\tif (!this.tagSettings.hasOwnProperty('tabletCardWidth') || this.tagSettings.tabletCardWidth === null) {\r\n\t\t\tthis.tagSettings.tabletCardWidth = defaultSettings.tabletCardWidth;\r\n\t\t}\r\n\r\n\t\tthis.tagSettings.primaryCards = Stream(this.tagSettings.primaryCards);\r\n\t\tthis.tagSettings.desktopCardWidth = Stream(this.tagSettings.desktopCardWidth);\r\n\t\tthis.tagSettings.tabletCardWidth = Stream(this.tagSettings.tabletCardWidth);\r\n\t\t\r\n\t}\r\n\tclassName() {\r\n\t\treturn \"WdcTagSettingsModal Modal--large\";\r\n\t}\r\n\r\n\ttitle() {\r\n\t\treturn [\r\n\t\t\tapp.translator.trans(\"walsgit_discussion_cards.admin.tag_modal.title\"),\r\n\t\t\t<span \r\n\t\t\t\tclassName=\"TagLabel colored\"\r\n\t\t\t\tstyle={\"--tag-bg: \" + this.attrs.model.data.attributes.color + \";\"}\r\n\t\t\t>\r\n\t\t\t\t<span className=\"TagLabel-text\">\r\n\t\t\t\t\t<span className=\"TagLabel-name\">{this.attrs.model.data.attributes.name}</span>\r\n\t\t\t\t</span>\r\n\t\t\t</span>\r\n\t\t]\r\n\t}\r\n\r\n\tcontent() {\r\n\t\treturn [\r\n\t\t\t<div className=\"Modal-body\">\r\n\t\t\t\t<div className=\"Form\">\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.tag_modal.intro_text\")}\r\n\t\t\t\t\t</p>\r\n                        \r\n\t\t\t\t\t<div className=\"Form-group\">\r\n\t\t\t\t\t\t<label htmlFor=\"primaryCards\">{app.translator.trans(\"walsgit_discussion_cards.admin.tag_modal.primaryCards_label\")}</label>\r\n\t\t\t\t\t\t<div className=\"helpText\">{app.translator.trans(\"walsgit_discussion_cards.admin.tag_modal.primaryCards_help\", {default: defaultSettings.primaryCards})}</div>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tname=\"primaryCards\"\r\n\t\t\t\t\t\t\tclassName=\"FormControl DC-Number\"\r\n\t\t\t\t\t\t\tbidi={this.tagSettings.primaryCards}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Form-group\">\r\n\t\t\t\t\t\t<label htmlFor=\"desktopCardWidth\">{app.translator.trans(\"walsgit_discussion_cards.admin.tag_modal.desktopCardWidth_label\")}</label>\r\n\t\t\t\t\t\t<div className=\"helpText\">{app.translator.trans(\"walsgit_discussion_cards.admin.tag_modal.desktopCardWidth_help\", {default: defaultSettings.desktopCardWidth})}</div>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tname=\"desktopCardWidth\"\r\n\t\t\t\t\t\t\tclassName=\"FormControl DC-Number\"\r\n\t\t\t\t\t\t\tbidi={this.tagSettings.desktopCardWidth}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Form-group\">\r\n\t\t\t\t\t\t<label htmlFor=\"tabletCardWidth\">{app.translator.trans(\"walsgit_discussion_cards.admin.tag_modal.tabletCardWidth_label\")}</label>\r\n\t\t\t\t\t\t<div className=\"helpText\">{app.translator.trans(\"walsgit_discussion_cards.admin.tag_modal.tabletCardWidth_help\", {default: defaultSettings.tabletCardWidth})}</div>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tname=\"tabletCardWidth\"\r\n\t\t\t\t\t\t\tclassName=\"FormControl DC-Number\"\r\n\t\t\t\t\t\t\tbidi={this.tagSettings.tabletCardWidth}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tclassName=\"Button Button--primary\"\r\n\t\t\t\t\t\tloading={this.loading}\r\n\t\t\t\t\t\tdisabled={this.changed()}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.tag_modal.submit_button\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>,\r\n\t\t];\r\n\t}\r\n\tchanged() {\r\n\t\tlet savedSettings = JSON.parse(this.attrs.model.data.attributes.walsgitDiscussionCardsTagSettings || 'null') || {};\r\n\r\n\t\tfunction isSameSettings(obj1, obj2) {\r\n\t\t\tif(typeof obj1 !== 'object' ||typeof obj2 !== 'object') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (Object.keys(obj1).length !== Object.keys(obj2).length) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\r\n\t\t\tfor (const key in obj1) {\r\n\t\t\t\tif (obj1.hasOwnProperty(key)) {\r\n\t\t\t\t\tif (typeof obj1[key] === 'object' && typeof obj2[key] === 'object') {\r\n\t\t\t\t\t\tif (!compareObjects(obj1[key], obj2[key])) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (obj1[key] !== obj2[key]) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn isSameSettings(JSON.parse(JSON.stringify(this.tagSettings)), savedSettings);\r\n\t}\r\n\r\n\tonsubmit(e) {\r\n\t\te.preventDefault();\r\n\r\n\t\tconst primaryCards = parseInt(this.tagSettings.primaryCards());\r\n\t\tif (isNaN(primaryCards) || primaryCards < 0) {\r\n\t\t\tapp.alerts.show({ type: 'error' }, app.translator.trans('walsgit_discussion_cards.admin.errors.primaryCards'));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\r\n\t\tconst desktopWidth = parseInt(this.tagSettings.desktopCardWidth());\r\n\t\tif (isNaN(desktopWidth) || desktopWidth < 10 || desktopWidth > 100) {\r\n\t\t\tapp.alerts.show({ type: 'error' }, app.translator.trans('walsgit_discussion_cards.admin.errors.desktopCardWidth'));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\r\n\t\tconst tabletWidth = parseInt(this.tagSettings.tabletCardWidth());\r\n\t\tif (isNaN(tabletWidth) || tabletWidth < 10 || tabletWidth > 100) {\r\n\t\t\tapp.alerts.show({ type: 'error' }, app.translator.trans('walsgit_discussion_cards.admin.errors.tabletCardWidth'));\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst tag = this.attrs.model;\r\n\r\n\t\tthis.tagSettings.primaryCards(primaryCards);\r\n\t\tthis.tagSettings.desktopCardWidth(desktopWidth);\r\n\t\tthis.tagSettings.tabletCardWidth(tabletWidth);\r\n\r\n\t\tconst tagSettings = JSON.stringify(this.tagSettings);\r\n\r\n\t\tthis.loading = true;\r\n\r\n\t\tapp.request({\r\n\t\t\tmethod: \"PATCH\",\r\n\t\t\turl:\r\n\t\t\t\tapp.forum.attribute(\"apiUrl\") +\r\n\t\t\t\t\"/tags/\" +\r\n\t\t\t\ttag.id() +\r\n\t\t\t\t\"/tagSettings\",\r\n\t\t\tbody: { data: { tagSettings } },\r\n\t\t}).then(function () {\r\n\t\t\ttag.data.attributes.walsgitDiscussionCardsTagSettings = tagSettings;\r\n\t\t\tapp.modal.close();\r\n\t\t});\r\n\t}\r\n}\r\n","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","import app from \"flarum/admin/app\";\r\nimport Button from \"flarum/common/components/Button\";\r\nimport classList from \"flarum/common/utils/classList\";\r\nimport EditTagModal from \"flarum/tags/components/EditTagModal\";\r\n\r\n\r\nexport default class UploadTagImageButton extends Button {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.tagId = props.attrs.tagId;\r\n\t}\r\n\t\r\n\tloading = false;\r\n\r\n\tview(vnode) {\r\n\t\tthis.attrs.loading = this.loading;\r\n\t\tthis.attrs.className = classList(this.attrs.className, \"Button\");\r\n\r\n\t\tif (app.store.data.tags[this.tagId].data.attributes.walsgitDiscussionCardsTagDefaultImage) {\r\n\t\t\tthis.attrs.onclick = this.remove.bind(this);\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tclassName=\"DC-TagDefaultImage\"\r\n\t\t\t\t\t\t\tsrc={\"assets/\" + app.store.data.tags[this.tagId].data.attributes.walsgitDiscussionCardsTagDefaultImage}\r\n\t\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\t\twidth=\"200px\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t{super.view({\r\n\t\t\t\t\t\t\t...vnode,\r\n\t\t\t\t\t\t\tchildren: app.translator.trans(\r\n\t\t\t\t\t\t\t\t\"core.admin.upload_image.remove_button\"\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tthis.attrs.onclick = this.upload.bind(this);\r\n\t\t}\r\n\r\n\t\treturn super.view({\r\n\t\t\t...vnode,\r\n\t\t\tchildren: app.translator.trans(\r\n\t\t\t\t\"core.admin.upload_image.upload_button\"\r\n\t\t\t),\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Prompt the user to upload an image.\r\n\t */\r\n\tupload() {\r\n\t\tif (this.loading) return;\r\n\r\n\t\tconst $input = $('<input type=\"file\">');\r\n\r\n\t\t$input\r\n\t\t\t.appendTo(\"body\")\r\n\t\t\t.hide()\r\n\t\t\t.trigger(\"click\")\r\n\t\t\t.on(\"change\", (e) => {\r\n\t\t\t\tconst body = new FormData();\r\n\t\t\t\tbody.append(this.attrs.name, $(e.target)[0].files[0]);\r\n\t\t\t\tbody.append('tagId', this.tagId);\r\n\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tm.redraw();\r\n\r\n\t\t\t\tapp.request({\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\turl: this.resourceUrl(),\r\n\t\t\t\t\tserialize: (raw) => raw,\r\n\t\t\t\t\tbody,\r\n\t\t\t\t}).then(this.success.bind(this), this.failure.bind(this));\r\n\t\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Remove the image.\r\n\t */\r\n\tremove() {\r\n\t\tthis.loading = true;\r\n\t\tm.redraw();\r\n\t\t\r\n\t\tconst body = new FormData();\r\n\t\tbody.append('tagId', this.tagId);\r\n\r\n\t\tapp.request({\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\turl: this.resourceUrl(),\r\n\t\t\tbody,\r\n\t\t}).then(this.success.bind(this), this.failure.bind(this));\r\n\t}\r\n\r\n\tresourceUrl() {\r\n\t\treturn app.forum.attribute(\"apiUrl\") + \"/\" + this.attrs.name;\r\n\t}\r\n\r\n\t/**\r\n\t * After a successful upload/removal, reload the page.\r\n\t *\r\n\t * @param {object} response\r\n\t * @protected\r\n\t */\r\n\tsuccess(response) {\r\n\t\twindow.location.reload();\r\n\t}\r\n\r\n\t/**\r\n\t * If upload/removal fails, stop loading.\r\n\t *\r\n\t * @param {object} response\r\n\t * @protected\r\n\t */\r\n\tfailure(response) {\r\n\t\tthis.loading = false;\r\n\t\tm.redraw();\r\n\t}\r\n}\r\n","import app from \"flarum/app\";\r\nimport Settings from \"./components/Settings\";\r\nimport { extend } from \"flarum/extend\";\r\nimport Model from \"flarum/common/Model\";\r\nimport Button from \"flarum/common/components/Button\";\r\nimport Tag from \"flarum/tags/models/Tag\";\r\nimport EditTagModal from \"flarum/tags/components/EditTagModal\";\r\nimport WdcTagSettingsModal from \"./components/WdcTagSettingsModal\";\r\nimport UploadTagImageButton from \"./components/UploadTagImageButton\";\r\n\r\napp.initializers.add(\"aoang-git-discussion-cards\", () => {\r\n\tTag.prototype.WdcDefaultImage = Model.attribute(\r\n\t\t\"walsgit_discussion_cards_tag_default_image\"\r\n\t);\r\n\r\n\textend(EditTagModal.prototype, \"fields\", function (items) {\r\n\t\tif (this.tag.id()) {\r\n\t\t\t// 解析 allowedTags，确保是数组\r\n\t\t\tlet allowedTags = [];\r\n\t\t\ttry {\r\n\t\t\t\tconst allowedTagsAttr = app.forum.attribute('walsgitDiscussionCardsAllowedTags');\r\n\t\t\t\tif (allowedTagsAttr) {\r\n\t\t\t\t\tallowedTags = JSON.parse(allowedTagsAttr);\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error('Failed to parse allowedTags:', e);\r\n\t\t\t\tallowedTags = [];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 确保是数组\r\n\t\t\tif (!Array.isArray(allowedTags)) {\r\n\t\t\t\tallowedTags = [];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 将标签 ID 转换为字符串以确保类型一致\r\n\t\t\tconst tagId = String(this.tag.id());\r\n\t\t\tlet isActivatedForTag = allowedTags.includes(tagId);\r\n\t\t\t\r\n\t\t\tlet activationBtnClasses = isActivatedForTag\r\n\t\t\t\t? \"DC-ActivationBtn Button activated\"\r\n\t\t\t\t: \"DC-ActivationBtn Button Button--primary\";\r\n\t\t\tlet DcTagSettingsClasses = isActivatedForTag ? \"DC-TagSettings\" : \"DC-TagSettings DC-Hidden\";\r\n\t\t\tlet activationBtnText = isActivatedForTag\r\n\t\t\t\t? app.translator.trans(\"walsgit_discussion_cards.admin.tags.deactivation_button\")\r\n\t\t\t\t: app.translator.trans(\"walsgit_discussion_cards.admin.tags.activation_button\");\r\n\t\t\t\r\n\t\t\tconst toggleActivation = () => {\r\n\t\t\t\tisActivatedForTag = !isActivatedForTag;\r\n\t\t\t\tif (isActivatedForTag) {\r\n\t\t\t\t\tallowedTags.push(tagId);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tallowedTags = allowedTags.filter(id => id !== tagId);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tapp.request({\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\turl: app.forum.attribute(\"apiUrl\") + \"/walsgit_discussion_cards_tag_update_allowedTags\",\r\n\t\t\t\t\tbody: { allowedTags },\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tapp.forum.data.attributes.walsgitDiscussionCardsAllowedTags = JSON.stringify(allowedTags);\r\n\t\t\t\t\tapp.data.settings.walsgit_discussion_cards_allowedTags = JSON.stringify(allowedTags);\r\n\r\n\t\t\t\t\tisActivatedForTag = !isActivatedForTag;\r\n\t\t\t\t\tactivationBtnClasses = isActivatedForTag\r\n\t\t\t\t\t\t? \"DC-ActivationBtn Button activated\"\r\n\t\t\t\t\t\t: \"DC-ActivationBtn Button Button--primary\";\r\n\t\t\t\t\tDcTagSettingsClasses = isActivatedForTag ? \"DC-TagSettings\" : \"DC-TagSettings DC-Hidden\";\r\n\t\t\t\t\tactivationBtnText = isActivatedForTag\r\n\t\t\t\t\t\t? app.translator.trans(\"walsgit_discussion_cards.admin.tags.deactivation_button\")\r\n\t\t\t\t\t\t: app.translator.trans(\"walsgit_discussion_cards.admin.tags.activation_button\");\r\n\t\t\t\t\tm.redraw();\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\titems.add(\r\n\t\t\t\t\"tag-discussion-cards-options\",\r\n\t\t\t\t<fieldset className=\"DC-Fieldset\">\r\n\t\t\t\t\t<legend>\r\n\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.tags.options_heading\")}\r\n\t\t\t\t\t</legend>\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName={activationBtnClasses}\r\n\t\t\t\t\t\ticon=\"fas fa-border-all\"\r\n\t\t\t\t\t\tonclick={toggleActivation}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{activationBtnText}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div className={DcTagSettingsClasses}>\r\n\t\t\t\t\t\t<div className=\"DC-TagDefaultImageSettings\">\r\n\t\t\t\t\t\t\t<h4>\r\n\t\t\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.tags.defaultImage_title\")}\r\n\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t<p className=\"helpText\">\r\n\t\t\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.tags.defaultImage_info\")}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t{m(UploadTagImageButton, {\r\n\t\t\t\t\t\t\t\tname: \"walsgit_discussion_cards_tag_default_image\",\r\n\t\t\t\t\t\t\t\tclassName: \"DC-UploadTagImageBtn\",\r\n\t\t\t\t\t\t\t\tariaLabel: \"Upload a default image for this tag\",\r\n\t\t\t\t\t\t\t\ttagId: this.tag.id()\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tclassName=\"Button Button--primary\"\r\n\t\t\t\t\t\t\ticon=\"fas fa-border-all\"\r\n\t\t\t\t\t\t\tonclick={() => {\r\n\t\t\t\t\t\t\t\tapp.modal.show(WdcTagSettingsModal, { model: this.tag });\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{app.translator.trans(\"walsgit_discussion_cards.admin.tags.options_button\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</fieldset>,\r\n\t\t\t\t-20\r\n\t\t\t);\r\n\t\t}\r\n\t});\r\n\r\n\tapp.extensionData.for(\"aoang-git-discussion-cards\").registerPage(Settings);\r\n});\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","_inheritsLoose","create","constructor","isExtensionInstalled","extensionName","app","data","extensions","isExtensionActive","settings","extensions_enabled","includes","Settings","_ExtensionPage","apply","arguments","_proto","content","viewsExtension","mbViewsExtension","blogExtension","repostExtension","warningIcon","icon","m","className","trans","this","buildSettingComponent","type","setting","label","help","options","requireParentTag","min","step","placeholder","max","attribute","src","UploadImageButton","name","class","href","target","rel","disabled","submitButton","onsubmit","primaryCards","desktopCardWidth","tabletCardWidth","maxListImages","num","Number","isNaN","show","saveSettings","dirty","then","newSettings","endOfKey","replace","charAt","toUpperCase","pushAttributes","error","console","ExtensionPage","defaultSettings","WdcTagSettingsModal","_Modal","oninit","vnode","tagSettings","JSON","parse","attrs","model","attributes","walsgitDiscussionCardsTagSettings","forum","walsgitDiscussionCardsPrimaryCards","walsgitDiscussionCardsDesktopCardWidth","walsgitDiscussionCardsTabletCardWidth","Stream","title","translator","style","color","htmlFor","default","bidi","Button","loading","changed","savedSettings","obj1","obj2","keys","length","compareObjects","isSameSettings","stringify","preventDefault","parseInt","alerts","desktopWidth","tabletWidth","tag","request","method","url","id","body","modal","close","Modal","_extends","assign","n","r","UploadTagImageButton","_Button","props","_this","tagId","view","classList","tags","walsgitDiscussionCardsTagDefaultImage","onclick","remove","alt","width","children","upload","_this2","$","appendTo","hide","trigger","on","FormData","append","files","redraw","resourceUrl","serialize","raw","success","failure","response","window","location","reload","add","Tag","WdcDefaultImage","Model","extend","EditTagModal","items","allowedTags","allowedTagsAttr","Array","isArray","String","isActivatedForTag","activationBtnClasses","DcTagSettingsClasses","activationBtnText","push","filter","walsgitDiscussionCardsAllowedTags","walsgit_discussion_cards_allowedTags","ariaLabel","registerPage"],"sourceRoot":""}